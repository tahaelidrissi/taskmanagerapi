name: Build and Deploy via SSH

on:
  push:
    branches:
      - ssh

env:
  IMAGE_NAME: taskmanagerapi

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3


      - name: SSH Setup
        run: |
          ssh-keygen -t ed25519 -P "" -f ~/.ssh/id_ed25519
          chmod 600 ~/.ssh/id_ed25519
    
      - name: Trusted Host
        run: |
          ssh-keyscan ip172-18-0-26-d1v1dei91nsg00d8636g.direct.labs.play-with-docker.com >> ~/.ssh/known_hosts

      - name: 🔁 SSH - Clone repo on PWD
        run: |
          echo "📁 Cloning repo on PWD"
          ssh -i ~/.ssh/id_ed25519 ip172-18-0-26-d1v1dei91nsg00d8636g.direct.labs.play-with-docker.com "mkdir testssh"
          

      